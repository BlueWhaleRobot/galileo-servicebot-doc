# 机器人参数修改

对应于不同的应用环境所需要的机器人的表现会有差别。比如有的场景需要机器人运动快一些，有的场景却需要机器人运动的更加平稳一些。机器人的表现都是由对应的参数确定的。通过机器人参数修改界面，我们可以轻松的修改机器人的参数从而让机器人更加适应我们的应用场景。

在连接机器人后点击上方导航栏中的设置按钮，打开机器人设置界面。

![设置按钮](images/parms-btn.png)

如果导航栏并没有设置按钮则说明机器人不支持设置参数。可以在更新机器人程序后再次尝试。

机器人设置界面如下

![设置参数界面](images/params.png)

修改需要改动的参数然后点击确认即可更新机器人参数。

如果确认按钮为禁用状态说明机器人程序不支持参数修改功能，需要升级机器人程序后再次修改。

## 主要参数说明

导航速度

导航速度为机器人导航时的目标速度，同时也是最大速度。单位为米每秒如果导航速度相对于默认值变化不大可以直接修改。如果有比较大的变动则需要同时修改下面的几个PID控制参数。否则机器人可能会出现导航时摇摆不定，无法稳定导航的问题。

最大角速度

单位：弧度/秒。设置导航过程中的最大转动速度

PID控制参数

机器人运动控制采用PID算法，K2, Kp, Ki, Kd即为相关的控制参数。如果你的PID控制算法比较熟悉可以按照一般的PID参数校调方法进行调整。如果不熟悉最好不要进行修改。

PID控制(K2)

单位：无量纲。表示路径弯曲度对前进速度的影响因子，值越大，转弯时前进速度越小。推荐取值范围0.3到2.0。值太小会导致入弯转弯速度过大，而冲出路径。

PID控制(Kp)

单位：无量纲。偏离路径时的PID比例控制因子。推荐取值范围0.3到2.0。值越大，回归路径的角速度会越大，过大的值会引发振荡使车左右摆动。值太小则会导致车偏离路径。

PID控制(Ki)

单位：无量纲。偏离路径时的PID积分控制因子。绝大部分情况下都不用调整该值。

PID控制(Kd)

单位：无量纲。偏离路径时的PID微分控制因子。推荐取值范围-1.0到2.0。这个值用来消除角速度振荡现象，值合适时可以消除车直线行驶时的左右摆动。值不合适同时过大时则会加强左右摆动的振荡现象。

预估距离

单位：米。运动控制参数前进方向瞄准距离，值越大，对路径的贴合效果越差（在不绕开模式时会影响通行效率），但是速度会更流畅，左右摆动幅度更小。

避障设置

![避障示意图](/images/obstacles.jpg)

是否绕开

勾选后表示选择遇到障碍物绕行的模式（绕不开也会停止移动，直到障碍物消失），取消勾选表示选择遇到障碍物停止移动的模式（障碍物消失后自动继续任务）。

绕开半径

单位：米。只在绕行模式下才有效。对应上图中的“绕行时与障碍物的距离”，同时表示最小可通过路径的一半宽度（例如设为0.5米，表示最小通过宽度是1米）。这个值不能小于车的实际宽度的一半。

车体宽度

单位：米。对应上图中的“左避障距离”+“右避障距离”。一般设为车实际宽度大小。

车体旋转宽度

单位：米。表示车对角线长度。当障碍物距离小于这个设定值一半时，无法旋转，角速度强制为零。

最大后退时间

单位：秒。只在绕行模式下才有效。表示在无法前进情况下，最大持续后退时间。最好设成一个大于零的小值，否者会影响可通行效果。

避障距离

单位：米。对应上图中的“前方障碍物距离”。即车与障碍物之间的安全距离，小于这个值时车无法向前移动，但是允许原地旋转。

地图设置

机器人的默认导航地图和对应的导航路径设置。在开启自动切换地图的功能时，机器人会按照此处的设置自动载入相关地图对应的路径。可以用于实现机器人自动导航场景切换，如从一号仓库自动切换到二号仓库。从一层场景自动切换到二层场景。
